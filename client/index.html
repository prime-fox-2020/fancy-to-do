<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="google-signin-client_id" content="755451054614-2ksvbnctggrqo8d4c1nd7u73krl5vrdt.apps.googleusercontent.com">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>Todo App</title>
</head>
<body>
  <div class="container p-5" id="signin-form"> 
    <h2>Sign in</h2>
    <form>
        <div class="form-group">
          <label for="loginEmail">Email address</label>
          <input type="email" class="form-control" id="loginEmail" aria-describedby="emailHelp" placeholder="Enter email">
        </div>
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <input type="password" class="form-control" id="loginPassword" placeholder="Password">
        </div>
        <p>Don't have account yet ? <span id="signup"><a href="" class="changeSignUp">Sign up</a></span></p>
        <p class="alert-signin text-danger"></p>
        <button type="submit" class="btn btn-primary">Sign in</button>
    </form><br>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>

  </div>

  <div class="container p-5" id="signup-form"> 
    <h2>Sign up</h2>
    <form>
        <div class="form-group">
          <label for="signUpEmail">Email address</label>
          <input type="text" class="form-control" id="signUpEmail" aria-describedby="emailHelp" placeholder="Enter email">
        </div>
        <div class="form-group">
          <label for="signUpPassword">Password</label>
          <input type="password" class="form-control" id="signUpPassword" placeholder="Password">
        </div>
        <p>Already have account ? <span id="signin"><a href="" class="changeSignIn">Sign in</a></span></p>
        <p class="alert-signup text-danger"></p>
        <button type="submit" class="btn btn-primary">Sign up</button>
    </form>
  </div>

  <div class="container-fluid p-5" id="yourListTodo">
      <p class="alert-access text-danger"></p>
      <div class="row">
        <div class="col" id="column-todo" style="width: 60%;">
        </div>
        <div class="col column-form todo-add" style="width: 40%;">
          <div class="container-fluid text-right"><a href="#" onclick="signOut();">Sign out</a></div>
          <h2>Add todo :</h2>
          <form enctype="multipart/form-data" id="formSubmit">
              <div class="form-group">
                <label for="todo-name">Todo</label>
                <input type="text" class="form-control" id="todo-name" aria-describedby="emailHelp" placeholder="Enter todo">
              </div>
              <div class="form-group">
                <label for="todo-description">Description</label>
                <textarea class="form-control" id="todo-description" rows="3" placeholder="Enter description"></textarea>
              </div>
              <div class="form-group">
                  <label for="todo-description">Due date</label>
                  <input type="date" class="form-control" id="todo-due_date">
              </div>
              <div class="form-group">
                <label for="img">Select image:</label>
                <input type="file" id="todo-image" name="img" accept="image/*">
              </div>
              <p class="alert-add text-danger"></p>
              <button type="submit" class="btn btn-primary">Add todo</button>
          </form>
        </div>
        <div class="col column-form todo-edit" style="width: 40%;">
          <div class="container-fluid text-right"><a href="#" onclick="signOut();">Sign out</a></div>
          <h2>Edit todo</h2>
          <form>
            <div class="form-group">
              <label for="todo-name">Todo</label>
              <input type="text" class="form-control" id="todo-name-edit" aria-describedby="emailHelp" placeholder="Enter todo" value="">
            </div>
            <div class="form-group">
              <label for="todo-description">Description</label>
              <textarea class="form-control" id="todo-description-edit" rows="3" placeholder="Enter description"></textarea>
            </div>
            <div class="form-group">
                <label for="todo-due-date">Due date</label>
                <input type="date" class="form-control" id="todo-due_date-edit">
            </div>
            <input type="number" class="form-control" id="todo-id-edit" value="" hidden>
            <p class="alert-edit text-danger"></p>
            <button type="submit" class="btn btn-primary">Edit</button>
          </form>
        </div>
      </div>
  </div>
  <script
  src="https://code.jquery.com/jquery-3.5.0.min.js"
  integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ="
  crossorigin="anonymous"></script>
  <script src="./script.js"></script>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <script>
    function onSignIn(googleUser) {
      const id_token = googleUser.getAuthResponse().id_token
      $.ajax({
        method: "POST",
        url: "http://localhost:3000/google-sign",
        data: { id_token : id_token }
      })
      .done( data => {
        localStorage.setItem('access_token', data.access_token)
        getTodos()
        toggleYourListTodo()
      })
  }
</script>
<script>
  function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
    });
    localStorage.removeItem('access_token')
    setUp()
    toggleSignIn()
  }
</script>
</body>
</html>

